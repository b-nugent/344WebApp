@{
    ViewBag.Title = "Stock";
}

@{
    var stockHandler = new StockInfo.StockHandler();
}

<h1>Stock Search</h1>

<div class="stockSearch">
<button type="button" id="search">Search</button>
<input id="stockTicker" type="text" size="20" maxlength"4" placeholder"Stock Ticker"/>
</div>

<div class="stockInfo" id="stockInfo">
    <h2>Stock Info</h2>
</div>

@section JavaScript{
    <script src='/Scripts/jquery.min.js'></script>

     
}


<script>
jQuery(document).ready(function($){
$('#search').click(function() {
        var symbol = $('input[id=stockTicker]').val(); 
        var url = 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%3D%22' + symbol + '%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=';
        $.getJSON(url, function(data) {           
            var items = [];
            $.each(data.query.results.quote, function (key, val) {
                if (key == "Name" | key == "DaysHigh" | key == "DaysLow" | key == "YearHigh" | key == "YearLow" | key == "LastTradePriceOnly") {
                    items.push('<li id="' + key + '">' + key + ": "  + val + '</li>');
                }

            });
            $('<ul/>', { 'class': 'my-new-list', html: items.join('')}).appendTo('#stockInfo');
        });
});
});
    </script>
